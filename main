#!/bin/bash
# 
# Created: 2025-Nov-01 19:30
#
# Last Modified: 2025-Nov-02 02:11

source ~/codeTemplates/allTemplates
source ~/codeTemplates/linuxTemplate
source ~/codeTemplates/menu


# Check if permission is accurate
checkPerms(){
    case "$perms" in
        [0-7][0-7][0-7])
            chmod "${perms}" $filename
            ;;
        *) 
            echo "Invalid permission: $permissionGranted"
            read -p "Please try again with 3 digits ranging from 0-7 (ie 777): " $perms
            checkPerms $perms
            ;;
    esac 
}

# Checks if things exist
fileCreated $1
filename=$fileCreated
dateCreated

if [ -e $filename ]
then
    # if file exists, changes date and time
    dateModified $filename
elif [ ! -f $filename ] 
then
    case $filename in 
        *.sh) 
            creatorName $2
            creator=$creators
            linuxCreate $filename $creator $madeOn
            ;;
        *)
            echo "Which template do you want? Type 0 for options?"
            read -p "Template Choice: " tempChoice
            creatorName $2
            main_menu $filename $creators $tempChoice $madeOn
            ;;
    esac
    
    echo "What permissions do you want to give this file?"
    read -p "777 is all permissions for everyone, 700 gives all permissions just for owner: " perms

    checkPerms $perms
fi


vim $filename
